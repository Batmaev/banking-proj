stages:
  - test

test_job:
  stage: test
  tags:
    - common
  before_script:
    - apt-get update -y
    - apt-get install software-properties-common -y
    - add-apt-repository ppa:deadsnakes/ppa -y
    - apt-get update -y
    - apt-get install python3.11 -y
    - pip3 install -r requirements.txt
  script:
    - python3.11 -m pytest --junitxml=report.xml
  artifacts:
    reports:
      junit: report.xml
    when: always